version: v2
tasks:
  - name: main
    image:
      beaker: ai2/conda
    command: [bash, /gantry/entrypoint.sh]
    arguments: [/bin/bash, -c, 'python hf_olmo/convert_olmo_to_hf.py --checkpoint-dir ''s3://ai2-llm/checkpoints/cheap_decisions/dolma-v1-6-and-sources-baseline-3x-code-1B-N-1T-D-mitchish1-001/step99000-unsharded'' --destination-dir ''/data/input/ai2-llm/checkpoints/cheap_decisions/dolma-v1-6-and-sources-baseline-3x-code-1B-N-1T-D-mitchish1-001/step99000-unsharded'' --keep-olmo-artifacts']
    envVars:
      - name: GANTRY_VERSION
        value: 1.8.3
      - name: GITHUB_REPO
        value: allenai/OLMo
      - name: GIT_REF
        value: fbfda0e3eca0768728eaa8d7dbd91bcbba5d8d2c
      - name: GANTRY_TASK_NAME
        value: main
      - name: AWS_ACCESS_KEY_ID
        secret: JENA_AWS_ACCESS_KEY_ID
      - name: AWS_SECRET_ACCESS_KEY
        secret: JENA_AWS_SECRET_ACCESS_KEY
      - name: NO_PYTHON
        value: "1"
    datasets:
      - mountPath: /gantry
        source:
          beaker: 01J721NEMRKZ4HBGNS5KV7873R
      - mountPath: /data/input
        source:
          weka: oe-eval-default
    result:
      path: /results
    resources:
      sharedMemory: 10 GiB
    context:
      priority: normal
      preemptible: true
    constraints:
      cluster:
        - ai2/jupiter-cirrascale-2
